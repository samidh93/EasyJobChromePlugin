chrome.runtime.onInstalled.addListener(()=>{console.log("Job Tracker Extension Installed")});async function r(){try{console.log("Testing Ollama connection...");let s=await fetch("http://localhost:11434/api/chat",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({model:"qwen2.5:3b",messages:[{role:"system",content:"You are a helpful AI assistant."},{role:"user",content:"Hello, are you working?"}],stream:!1})});if(!s.ok){let a=await s.text();throw console.error("Ollama chat test failed:",{status:s.status,statusText:s.statusText,body:a}),new Error("HTTP error! status: ".concat(s.status,", details: ").concat(a))}let t=await s.json();return console.log("Ollama chat test successful:",t),{success:!0,data:{version:t.model,response:t.message.content}}}catch(e){return console.error("Ollama connection failed:",e),{success:!1,error:e.message,details:e.stack}}}async function l(e,s){try{console.log("Making Ollama API call to ".concat(e,":"),s);let t=await fetch("http://localhost:11434/api/".concat(e),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify(s)});if(!t.ok){let o=await t.text();throw console.error("Ollama API error response:",{status:t.status,statusText:t.statusText,body:o}),new Error("HTTP error! status: ".concat(t.status,", details: ").concat(o))}let a=await t.json();return console.log("Ollama API call successful:",a),{success:!0,data:a}}catch(t){return console.error("Ollama API call failed (".concat(e,"):"),t),{success:!1,error:t.message,details:t.stack}}}chrome.runtime.onMessage.addListener((e,s,t)=>{if(console.log("Received message in background script:",e),e.action==="testOllama")return r().then(t),!0;if(e.action==="callOllama"){let{endpoint:a,data:o}=e;return console.log("Making Ollama API call:",{endpoint:a,data:o}),l(a,o).then(t),!0}});
